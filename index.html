<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÂøÉÁªáÁ¨îËÄï - Ê±âÂ≠óÂê¨ÂÜô</title>
    <meta name="description" content="Master Chinese characters through dictation and writing.">
    <meta name="version" content="2.0.1">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#FAFAF6">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Starry Sky">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/icon-192.png">



    <!-- Font: KaiTi enforced via styles.css system fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">


    <!-- CSS is now imported via main.ts using Vite's native CSS import -->
    <!-- HanziLookup for handwriting recognition -->
    <script src="https://cdn.jsdelivr.net/gh/gugray/HanziLookupJS@master/dist/hanzilookup.min.js"></script>
</head>

<body>

    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <h1 class="splash-title">ÂøÉÁªáÁ¨îËÄï</h1>
            <p class="splash-subtitle">Ê±âÂ≠óÂê¨ÂÜô</p>
        </div>
    </div>

    <!-- Header -->
    <header class="dashboard-header" id="main-header">
        <div class="header-left">
            <button id="header-back-btn" class="header-back-btn" aria-label="ËøîÂõû">‚ùÆ</button>
            <div id="player-avatar" class="player-avatar" title="Change Avatar"></div>
        </div>
        <h1 class="app-title" id="app-title">ÂøÉÁªáÁ¨îËÄï</h1>
        <div class="header-right">
            <!-- Session Stats (shown during active gameplay) -->
            <div id="session-stats" class="header-stats" style="display: none;">
                <span class="stat-pill" id="streak-container" style="display: none;">
                    <span style="font-size: 1.1rem;">üî•</span>
                    <span id="streak-count" style="font-weight: 600; margin-left: 4px;">0</span>
                    <span id="streak-badge" style="display: none; color: var(--tang-gold); margin-left: 2px;">‚ú®</span>
                </span>
                <span class="stat-pill">
                    <svg viewBox="0 0 24 24" width="20" height="20"
                        style="vertical-align: middle; margin-right: 2px; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));">
                        <defs>
                            <linearGradient id="session-ingot-body" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#B45309" />
                                <stop offset="50%" stop-color="#fbbf24" />
                                <stop offset="100%" stop-color="#B45309" />
                            </linearGradient>
                            <linearGradient id="session-ingot-top" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" stop-color="#FEF3C7" />
                                <stop offset="100%" stop-color="#F59E0B" />
                            </linearGradient>
                        </defs>
                        <path d="M7,11.5 A5,4 0 0,1 17,11.5" fill="url(#session-ingot-top)" />
                        <path d="M2,11.5 Q12,14.5 22,11.5 Q21,19.5 12,19.5 Q3,19.5 2,11.5 Z"
                            fill="url(#session-ingot-body)" />
                    </svg>
                    <span id="score" style="font-weight: 600;">0</span>
                </span>
            </div>
            <!-- Global Stats (shown on menus) -->
            <div id="header-stats" class="header-stats">
                <!-- Populated by JS -->
                <span class="stat-pill">üî• 0</span>
                <span class="stat-pill"><svg viewBox="0 0 24 24" width="22" height="22"
                        style="vertical-align: middle; margin-right: 2px; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));">
                        <defs>
                            <linearGradient id="y-body" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" stop-color="#B45309" />
                                <stop offset="50%" stop-color="#fbbf24" />
                                <stop offset="100%" stop-color="#B45309" />
                            </linearGradient>
                            <linearGradient id="y-top" x1="0%" y1="0%" x2="0%" y2="100%">
                                <stop offset="0%" stop-color="#FEF3C7" />
                                <stop offset="100%" stop-color="#F59E0B" />
                            </linearGradient>
                        </defs>
                        <path d="M7,11.5 A5,4 0 0,1 17,11.5" fill="url(#y-top)" />
                        <path d="M2,11.5 Q12,14.5 22,11.5 Q21,19.5 12,19.5 Q3,19.5 2,11.5 Z" fill="url(#y-body)" />
                    </svg> 0</span>
            </div>
        </div>
    </header>

    <!-- DASHBOARD / START SCREEN -->
    <div id="start-overlay" role="main">
        <!-- Background Stars (CSS Animation) -->
        <div class="starry-bg">
            <div class="stars-1"></div>
            <div class="stars-2"></div>
            <div class="stars-3"></div>
        </div>


        <p class="version-tag-bottom">v2.0.1</p>
    </div>

    <!-- Tab Bar Footer (Persistent) -->
    <nav class="tab-bar">
        <div class="tab-bar-inner">
            <button class="tab-item active" id="start-btn">
                <span class="tab-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M3 18v-6a9 9 0 0 1 18 0v6"></path>
                        <path
                            d="M21 19a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3zM3 19a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2v-3a2 2 0 0 0-2-2H3z">
                        </path>
                    </svg>
                </span>
                <span class="tab-label">Âê¨ÂÜô</span>
            </button>
            <button class="tab-item" id="dictation-btn">
                <span class="tab-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
                        <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
                        <path d="M2 2l7.586 7.586"></path>
                        <circle cx="11" cy="11" r="2"></circle>
                    </svg>
                </span>
                <span class="tab-label">ÈªòÂÜô</span>
            </button>
            <button class="tab-item" id="review-btn">
                <span class="tab-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <line x1="18" y1="20" x2="18" y2="10"></line>
                        <line x1="12" y1="20" x2="12" y2="4"></line>
                        <line x1="6" y1="20" x2="6" y2="14"></line>
                    </svg>
                </span>
                <span class="tab-label">ËøõÂ∫¶</span>
            </button>
        </div>
    </nav>



    <canvas id="particle-canvas"></canvas>

    <div class="game-stage">
        <!-- Game content will be rendered here dynamically -->
    </div>

    <script type="module" src="/src/main.ts"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => {
                        console.log('SW registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('SW registration failed:', error);
                    });
            });
        }
    </script>
    <!-- Reveal Modal -->
    <div id="reveal-modal" class="reveal-modal" style="display: none;">
        <div class="reveal-modal-content">
            <div id="reveal-term" class="reveal-term"></div>
            <div id="reveal-pinyin" class="reveal-pinyin"></div>
            <div class="reveal-hint">ÁÇπÂáª‰ªªÊÑè‰ΩçÁΩÆÂÖ≥Èó≠</div>
        </div>
    </div>
    <div id="footer-progress" class="footer-progress" style="display: none;"></div>
</body>

</html>